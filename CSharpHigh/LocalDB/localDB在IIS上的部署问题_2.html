<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.5/css/bootstrap.min.css">
	<link rel="pingback" href="https://blogs.msdn.microsoft.com/sqlexpress/xmlrpc.php">
		<!--[if lt IE 9]>
	<script src="https://blogs.msdn.microsoft.com/sqlexpress/wp-content/themes/microsoft/js/html5.js"></script>
	<![endif]-->
	    <link rel="shortcut icon" href="https://blogs.msdn.microsoft.com/sqlexpress/wp-content/themes/microsoft-msdn/images/favicon-msdn.png">
<title>Using LocalDB with Full IIS, Part 2: Instance Ownership &#8211; SQL Server Express WebLog</title>
<link rel='dns-prefetch' href='//ajax.aspnetcdn.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="SQL Server Express WebLog &raquo; Using LocalDB with Full IIS, Part 2: Instance Ownership Comments Feed" href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/11\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/blogs.msdn.microsoft.com\/sqlexpress\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.10"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56760,9792,65039],[55358,56760,8203,9792,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='wds-ratings-css'  href='https://blogs.msdn.microsoft.com/sqlexpress/wp-content/plugins/wds-ratings/wds-ratings.css?ver=20161014' type='text/css' media='all' />
<link rel='stylesheet' id='microsoft-parent-style-css'  href='https://blogs.msdn.microsoft.com/sqlexpress/wp-content/themes/microsoft/style.css?ver=02092017' type='text/css' media='all' />
<link rel='stylesheet' id='microsoft-child-style-css'  href='https://blogs.msdn.microsoft.com/sqlexpress/wp-content/themes/microsoft-msdn/style.css?ver=04152016' type='text/css' media='all' />
<script type='text/javascript' src='https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.12.1.min.js'></script>
<script type='text/javascript' src='https://ajax.aspnetcdn.com/ajax/bootstrap/3.3.5/bootstrap.min.js'></script>
<script type='text/javascript' src='https://blogs.msdn.microsoft.com/sqlexpress/wp-content/themes/microsoft/js/single.js?ver=02092017'></script>
<link rel='https://api.w.org/' href='https://blogs.msdn.microsoft.com/sqlexpress/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://blogs.msdn.microsoft.com/sqlexpress/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://blogs.msdn.microsoft.com/sqlexpress/wp-includes/wlwmanifest.xml" /> 

<link rel="canonical" href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/" />
<link rel='shortlink' href='https://blogs.msdn.microsoft.com/sqlexpress/?p=150' />
<link rel="alternate" type="application/json+oembed" href="https://blogs.msdn.microsoft.com/sqlexpress/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fsqlexpress%2F2011%2F12%2F08%2Fusing-localdb-with-full-iis-part-2-instance-ownership%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://blogs.msdn.microsoft.com/sqlexpress/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fblogs.msdn.microsoft.com%2Fsqlexpress%2F2011%2F12%2F08%2Fusing-localdb-with-full-iis-part-2-instance-ownership%2F&#038;format=xml" />
	<script>
		if(window.document.referrer.indexOf('login.live.com') !== -1) {
			// redefine ga function to prevent referrer data collected by google analytics
			window.ga = function(){};
		}
	</script>
	<div id='msccBanner' dir='ltr' data-site-name='uhf-MSDNBlogs' data-mscc-version='0.4.1' data-nver='aspnet-3.1.3' data-sver='0.1.2' class='cc-banner' role='alert' aria-labelledby='msccMessage'><div class='cc-container'><svg class='cc-icon cc-v-center' x='0px' y='0px' viewBox='0 0 44 44' height='30px' fill='none' stroke='currentColor'><circle cx='22' cy='22' r='20' stroke-width='2'></circle><line x1='22' x2='22' y1='18' y2='33' stroke-width='3'></line><line x1='22' x2='22' y1='12' y2='15' stroke-width='3'></line></svg> <span id='msccMessage' class='cc-v-center cc-text' tabindex='0'>This site uses cookies for analytics, personalized content and ads. By continuing to browse this site, you agree to this use.</span> <a href='https://go.microsoft.com/fwlink/?linkid=845480' target='_top' aria-label='Learn more about Microsoft&#39;s Cookie Policy' id='msccLearnMore' class='cc-link cc-v-center cc-float-right' data-mscc-ic='false'>Learn more</a></div></div><script type="text/javascript">
jQuery( window ).load( function() {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    if (typeof mscc === 'undefined' || (!mscc || mscc.hasConsent())) {
                ga('require', 'linkid');
                ga('create', 'UA-65691138-1', 'auto');
                ga('send', 'pageview');
                ga('set', 'anonymizeIp', true);
            }
} );
</script>
			<!-- Begin Custom CSS --><style type="text/css" id="wds-custom-css">
						</style><!-- End Custom CSS -->
			<meta property="og:type" content="article" />
<meta property="og:title" content="Using LocalDB with Full IIS, Part 2: Instance Ownership" />
<meta property="og:url" content="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/" />
<meta property="og:site_name" content="SQL Server Express WebLog" />
<meta property="og:description" content="This is the second post in a two-post mini-series on using LocalDB with Full IIS. Don&#8217;t miss&nbsp;the first post. Quick Recap In the first post of this mini-series we said there are two properties of LocalDB causing problems when running under full IIS: LocalDB needs user profile to be loaded LocalDB instance is owned by..." />
<meta property="og:image" content="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/4278.1.0_AspNetFailure2.png" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Using LocalDB with Full IIS, Part 2: Instance Ownership" />
<meta name="twitter:url" content="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/" />
<meta name="twitter:description" content="This is the second post in a two-post mini-series on using LocalDB with Full IIS. Don&#8217;t miss&nbsp;the first post. Quick Recap In the first post of this mini-series we said there are two properties of LocalDB causing problems when running under full IIS: LocalDB needs user profile to be loaded LocalDB instance is owned by..." />
<meta name="twitter:image" content="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/4278.1.0_AspNetFailure2.png" />
<style type="text/css" id="syntaxhighlighteranchor"></style>
</head>

<body class="post-template-default single single-post postid-150 single-format-standard">
<div id="page" class="site container-fluid">

	<header id="site-header" class="site-header row" role="banner">
		<div id="site-header-global-wrapper" class="site-header-global-wrapper">
			<div id="site-header-global" class="site-header-global">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#site-profile-menu" aria-label="toggle menu" tabindex="0" aria-expanded="false">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<div id="site-logo" class="col-sm-5 row navbar-header">
					<div id="header-microsoft-logo">
						<a id="home-link" href="https://www.microsoft.com/" tabindex="1" aria-label="Microsoft logo">
							<img id="header-microsoft-logo-svg" src="https://blogs.msdn.microsoft.com/sqlexpress/wp-content/themes/microsoft/images/ms-logo-gray.svg" alt="Microsoft logo">
							<span id="brand">
								<span id="brand-separator">|</span>
								<span id="brand-name"></span>
							</span>
						</a>
					</div>
				</div>
				<div id="site-header-global-right" class="col-sm-7">
					<div id="site-profile-menu" class="navbar-collapse collapse">
						<div id="search-form-wrapper">
														<form id="search-form" role="search" action="https://social.msdn.microsoft.com/search/en-US" home-url="https://blogs.msdn.microsoft.com/sqlexpress" autocomplete="off">
								<div class="input-group">
																			<input name="rq" value="site:blogs.msdn.microsoft.com/sqlexpress" type="hidden">
										<input name="rn" value="sqlexpress" type="hidden">
																		<input type="hidden" name="ral" value="1">
									<input type="text" class="form-control" placeholder="Search" name="query" id="srch-term" tabindex="0" aria-label="Search box with search options">
									<div class="input-group-btn">
										<button aria-label="Search" class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
									</div>
								</div>
							</form>
							<div id="search-option">
								<div class="search-filter" id="search-filter-site" tabindex="0" aria-label="Search MSDN">
									<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
									<span class="search-text">Search MSDN</span>
								</div>
								<div class="search-filter" tabindex="0" aria-label="Search all blogs" id="search-filter-all-blogs">
									<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
									<span class="search-text">Search all blogs</span>
								</div>
																	<div class="search-filter selected" tabindex="0" aria-label="Search this blog" id="search-filter-this-blog">
										<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
										<span class="search-text">Search this blog</span>
									</div>
															</div>
						</div>
						<div id="me-control">
															<a href="https://blogs.msdn.microsoft.com/wp-login.php?aadsso_action=login">Sign in</a>
													</div>
					</div>
				</div>

			</div>

		</div>
		<div id="site-header-blog-wrapper" class="site-header-blog-wrapper ms-blog-header clear-both">
			<div id="site-header-blog" class="site-header-blog">
				<nav class="navbar navbar-inverse">
					<div id="blog-logo-area" class="navbar-header">
						<div id="blog-logo" data-toggle="collapse" data-target="#blog-menu" tabindex="0" aria-label="blog logo">
														<div id="blog-logo-text">
				<h1 class="site-title ms-blog-title">
					<a href="https://blogs.msdn.microsoft.com/sqlexpress" class="for-desktop">
						SQL Server Express WebLog					</a>
					<a href="https://blogs.msdn.microsoft.com/sqlexpress" class="for-mobile">
						SQL Server Express WebLog					</a>
				</h1>
				<p class="site-description ms-blog-description"></p>
			</div>
									</div>
					</div>
									</nav>
			</div>
		</div>
		<div id="site-header-image-wrapper" class="ms-blog-banner">
			<div id="site-header-image">
											</div>
		</div>
	</header>

	<div id="site-content" class="site-content row">

	<div id="primary" class="content-area col-sm-9">
		<div id="single-content" class="div-content">

			
				
<article id="post-150" class="post-150 post type-post status-publish format-standard hentry category-uncategorized">

	<header class="entry-header single">
		<h1 class="entry-title">Using LocalDB with Full IIS, Part 2: Instance Ownership</h1>		<div class="rating-wrap">
		<div id="star-rating-150" class="wds-ratings" data-rating="5" data-userrating="0" data-postid="150" data-container="body" data-toggle="tooltip" title="3 user(s) rated">
			<div class="wds-ratings-inner-wrap">
				<div>
					<div aria-label="Select 5 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="5"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span><span aria-hidden="true" class="star-5"><span>&#x2605;</span></span></div><div aria-label="Select 4 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="4"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span><span aria-hidden="true" class="star-4"><span>&#x2605;</span></span></div><div aria-label="Select 3 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="3"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span><span aria-hidden="true" class="star-3"><span>&#x2605;</span></span></div><div aria-label="Select 2 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="2"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span><span aria-hidden="true" class="star-2"><span>&#x2605;</span></span></div><div aria-label="Select 1 star, this article is 5 star rated" tabindex="0" class="wds-ratings-stars wds-ratings-stars-enable-editing" data-stars="1"><span aria-hidden="true" class="star-1"><span>&#x2605;</span></span></div>
				</div>
			</div>
		</div>
		</div>		<div class="clear-both"></div>
		<div class="entry-meta">
			<img alt='avatar of sqlexpress' src='https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=sqlexpress&size=extralarge&version=00000000-0000-0000-0000-000000000000'  class='avatar avatar-22 photo' height='22' width='22' /><span class="byline"><span class="author vcard"><a class="url fn n profile-usercard-hover" data-profile-userid="7e5e566b7eff425ea82b8a27b11ef65d" href="https://social.msdn.microsoft.com/profile/sqlexpress">sqlexpress</a></span></span><span class="posted-on posted-on-margin"><span class="screen-reader-text"></span><time class="entry-date published updated" datetime="2011-12-08T23:17:00+00:00">December 8, 2011</time></span><span class="comments-link"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comments">30</a></span>				<span class="social-icons-wrap">
		<ul class="social-icons">
			<li><div class="fb-share-button" data-href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/" data-layout="button_count" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/&amp;src=sdkpreparse">Share</a></div></li>
			<div id="fb-root" style="display:none"></div>

			<li class="social-icon twitter"><a data-social='{"type":"twitter", "url":"https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/", "text": "Using LocalDB with Full IIS, Part 2: Instance Ownership"}' href="#" id="post_tweet_count">0</a></li>
			<li class="social-icon linkedin"><a data-social='{"type":"linkedin", "url":"https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/", "text": "Using LocalDB with Full IIS, Part 2: Instance Ownership"}' href="#" id="get_post_linkedin_count">0</a></li>
		</ul>
	</span><!-- .social-icons-wrap -->
	<script type="text/javascript">
		// Get social counts
		jQuery( window ).load(function () {
			jQuery.getScript('https://blogs.msdn.microsoft.com/sqlexpress/wp-content/themes/microsoft/js/social-counts.js?ver=02092017')
				.done(function(script,textStatus) {
					window.msdnsocial.ajax('https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/');
				});
		});
	</script>
		</div>
		<hr>
	</header><!-- .entry-header -->

	<div class="entry-content single">
		<p>This is the second post in a two-post mini-series on using LocalDB with Full IIS. Don't miss&nbsp;the <a href="http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx">first post</a>.</p>
<h3>Quick Recap</h3>
<p>In the <a href="http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx">first post</a> of this mini-series we said there are two properties of LocalDB causing problems when running under full IIS:</p>
<ul>
<li>LocalDB needs user profile to be loaded</li>
<li>LocalDB instance is owned by a single user and private (by default)</li>
</ul>
<p>We saw how to properly load the user profile, now it's time to tackle the problem of LocalDB instance ownership.</p>
<h3>The Problem of the Private Instance</h3>
<p>At the end of the previous post we left our Web Application in this state:</p>
<p><a href="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/4278.1.0_AspNetFailure2.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/4278.1.0_5F00_AspNetFailure2.png"><img style="max-width: 550px;" border="0" alt="" src="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/4278.1.0_AspNetFailure2.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/4278.1.0_5F00_AspNetFailure2.png" /></a></p>
<p>As we can see we are facing the following error:</p>
<p style="margin: 20px; color: #800000;" color="#800000"><i><b>System.Data.SqlClient.SqlException:</b> Cannot open database "OldFashionedDB" requested by the login. The login failed.<br /> Login failed for user 'IIS APPPOOL\ASP.NET v4.0'.</i></p>
<p>This time the error is quite clear. LocalDB was started and the Web Application was able to connect to it, but the connection was then terminated due to login failure. The ApplicationPoolIdentity account for the IIS application pool (in this case <b>IIS APPPOOL\ASP.NET v4.0</b>) couldn't login to LocalDB instance because the database specified in the connection string (<b>OldFashionedDB</b>) wasn't found. How odd, since connecting from Visual Studio with the same connection string succeeds!</p>
<p><a href="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/2451.1_1.TheDbIsThere.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/2451.1_5F00_1.TheDbIsThere.png"><img style="max-width: 550px;" border="0" alt="" src="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/2451.1_1.TheDbIsThere.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/2451.1_5F00_1.TheDbIsThere.png" /></a></p>
<p>(In this screenshot I am using SQL Server Object Explorer, which is introduced by <a href="http://blogs.msdn.com/b/ssdt/archive/2011/11/21/what-s-new-in-sql-server-data-tools-ctp4.aspx">SQL Server Data Tools</a>. As you can see it adds SQL Server tools right inside Visual Studio 2010.)</p>
<p>How is it possible that Visual Studio connects to LocalDB just fine, while the connection from Web Application fails? In both cases the connection string is the following:</p>
<p style="margin: 20px;"><span style="font-family: Consolas; color: #000000;" face="Consolas" color="#000000">Data Source=(localdb)\v11.0;Initial Catalog=OldFashionedDB;Integrated Security=True</span></p>
<p>The answer is that there are <b>two</b> different LocalDB instances here. Unlike SQL Server Express instances, which are running as Windows services, LocalDB instances are running as user processes. When different Windows users are connecting to LocalDB, they will end up with different LocalDB processes started for each of them. When we connect to <b>(localdb)\v11.0</b> from Visual Studio, a LocalDB instance is started for us and runs as our Windows account. But when Web Application, running in IIS as ApplicationPoolIdentity, is connecting to LocalDB, another LocalDB instance is started for it and is running as ApplicationPoolIdentity! In effect, even though both Visual Studio and Web Application are using the same LocalDB connection string, they are connecting to different LocalDB instances. Obviously the database created from Visual Studio on our LocalDB instance will not be available in Web Application's LocalDB instance.</p>
<p>A good analogy to this is <b>My Documents</b> folder in Windows. Say we open Visual Studio and create a file in our <b>My Documents</b> folder. Then we login to the same machine as a different user and go to <b>My Documents</b> folder again. We won't find the file there as <b>My Documents</b> of the second user and our <b>My Documents</b> are two different folders. Similarly LocalDB instances <b>(localdb)\v11.0</b> owned by two different users are two different processes with two different sets of databases.</p>
<p>This is also the reason the Web Application was able to connect to LocalDB from IIS Express. Just like LocalDB, IIS Express is a user process. It is started by Visual Studio and runs as the same Windows account as the Visual Studio process. Two different processes running as the same Windows account (Visual Studio and IIS Express, both running as our Windows account) connecting to <b>(localdb)\v11.0</b> are connecting to the same LocalDB process, also started as the same Windows account.</p>
<h3>Possible Solutions</h3>
<p>Understanding the nature of the problem brings multiple approaches to solving it. As different approaches have different tradeoffs, instead of prescribing one solution, below I presented three approaches that seem most viable to me. My hope is to hear from you about the one that worked best for you! Here is the list:</p>
<ul>
<li><a href="#OurIIS">Approach 1: Run IIS as our Windows user</a></li>
<li><a href="#SharedLocalDB">Approach 2: Use LocalDB Shared Instance</a></li>
<li><a href="#UseSSE">Approach 3: Use full SQL Server Express</a></li>
</ul>
<p>Let's take a closer look at each of them.</p>
<h3><a name="OurIIS"></a>Approach 1: Run IIS as our Windows user</h3>
<p>If different user accounts are the problem, why not try to run our Web Application under our Windows account? Web Application would connect to the same LocalDB as Visual Studio and everything should just work.</p>
<p>Making the configuration change is relatively easy, just start IIS Manager and find the right Application Pool:</p>
<p><a href="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/6114.2_1.ConfigureCurrentUser1.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/6114.2_5F00_1.ConfigureCurrentUser1.png"><img style="max-width: 550px;" border="0" alt="" src="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/6114.2_1.ConfigureCurrentUser1.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/6114.2_5F00_1.ConfigureCurrentUser1.png" /></a></p>
<p>Open <b>Advanced Settings</b> screen (available in the context menu):</p>
<p><a href="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/6011.2_2.ConfigureCurrentUser2.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/6011.2_5F00_2.ConfigureCurrentUser2.png"><img style="max-width: 550px;" border="0" alt="" src="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/6011.2_2.ConfigureCurrentUser2.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/6011.2_5F00_2.ConfigureCurrentUser2.png" /></a></p>
<p>Click the little button in the <b>Identity</b> property to bring up the <b>Application Pool Identity</b> screen:</p>
<p><a href="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/4762.2_3.ConfigureCurrentUser3.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/4762.2_5F00_3.ConfigureCurrentUser3.png"><img style="max-width: 550px;" border="0" alt="" src="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/4762.2_3.ConfigureCurrentUser3.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/4762.2_5F00_3.ConfigureCurrentUser3.png" /></a></p>
<p>Starting the Web Application again will confirm that the problem is solved:</p>
<p><a href="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/7183.X_0.Success.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/7183.X_5F00_0.Success.png"><img style="max-width: 550px;" border="0" alt="" src="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/7183.X_0.Success.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/7183.X_5F00_0.Success.png" /></a></p>
<p>What are the drawbacks of this approach? Of course running Web Application under our account brings certain <b>security risks</b>. If someone hijacks our Web Application they will be able to access all system resources our account can. Running the Web Application as ApplicationPoolIdentity provides additional protection since ApplicationPoolIdentity accounts have very limited access to local system resources. Therefore I cannot recommend this approach in general, but when used with care it is a viable option in some cases.</p>
<h3><a name="SharedLocalDB"></a>Approach 2: Use LocalDB Shared Instance</h3>
<p>We could also use an instance sharing feature of LocalDB. It allows us to share a LocalDB instance with other users on the same machine. The shared instance will be accessible under a public name.</p>
<p>The easiest way of sharing an instance is to use <a href="http://msdn.microsoft.com/en-us/library/hh212961(v=sql.110).aspx">SqlLocalDB.exe</a> utility. Just start an administrative command line prompt, and type the following command:</p>
<p style="margin: 20px;"><span style="font-family: Consolas; color: #000000;" face="Consolas" color="#000000">sqllocaldb share v11.0 IIS_DB</span></p>
<p>It will share the private LocalDB instance <b>v11.0</b> under the public name <b>IIS_DB</b>. All users on the machine will be able to connect to this instance, using <b>(localdb)\.\IIS_DB</b> as a server address. Note the <b>\.</b> before the instance name, indicating this is a shared instance name. We should replace the connection string in our Web Application with an updated one:</p>
<p style="margin: 20px;"><span style="font-family: Consolas; color: #000000;" face="Consolas" color="#000000">Data Source=(localdb)\.\IIS_DB;Initial Catalog=OldFashionedDB;Integrated Security=True</span></p>
<p>Before the shared instance can be used by the Web Application we need to start it and create logins for the ApplicationPoolIdentity. Starting the instance is easy, simply connecting to it from SQL Server Object Explorer will start it and keep it alive. Once we are in the SQL Server Object Explorer we can also create the login for ApplicationPoolIdentity. We could use the following query:</p>
<p style="margin: 20px;"><span style="font-family: Consolas; color: #0000ff;" face="Consolas" color="#0000ff">create login <span style="color: #008080;" color="#008080">[IIS APPPOOL\ASP.NET v4.0]</span> from windows;<br /> exec <span style="color: #800000;" color="#800000">sp_addsrvrolemember</span> <span style="color: #ff0000;" color="#ff0000">N'IIS APPPOOL\ASP.NET v4.0'</span>, <span style="color: #008080;" color="#008080">sysadmin</span> </span></p>
<p>This script gives full administrative access to our LocalDB instance to the ApplicationPoolIdentity account. Whenever possible, I would recommend using more limited, database-level or even table-level permissions.</p>
<p>Now we can run our Web Application again. This time it should work just fine:</p>
<p><a href="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/7183.X_0.Success.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/7183.X_5F00_0.Success.png"><img style="max-width: 550px;" border="0" alt="" src="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/7183.X_0.Success.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/7183.X_5F00_0.Success.png" /></a></p>
<p>What are the drawbacks of this approach? The main one is that, before Web Application can connect to the shared instance, we need to make sure the instance is started. For that to happen the Windows account that owns the instance must connect to it and the connection must be kept open, or the LocalDB instance will shut down.</p>
<h3><a name="UseSSE"></a>Approach 3: Use full SQL Server Express</h3>
<p>Since full IIS runs as a service, maybe using traditional, service-based SQL Server Express is the right approach? We could just install SQL Server 2012 Express RC0 and create the <b>OldFashionedDB</b> database in it. We can even use our brand new SQL Server Data Tools to do it, as it works with any SQL Server version and edition. Our connection string would have to change to:</p>
<p style="margin: 20px;"><span style="font-family: Consolas; color: #000000;" face="Consolas" color="#000000">Data Source=.\SQLEXPRESS;Initial Catalog=OldFashionedDB;Integrated Security=True</span></p>
<p>Of course, just as in the previous case, we would need to make sure the ApplicationPoolIdentity account has access to our SQL Server Express instance. We can use the same script as previously:</p>
<p style="margin: 20px;"><span style="font-family: Consolas; color: #0000ff;" face="Consolas" color="#0000ff">create login <span style="color: #008080;" color="#008080">[IIS APPPOOL\ASP.NET v4.0]</span> from windows;<br /> exec <span style="color: #800000;" color="#800000">sp_addsrvrolemember</span> <span style="color: #ff0000;" color="#ff0000">N'IIS APPPOOL\ASP.NET v4.0'</span>, <span style="color: #008080;" color="#008080">sysadmin</span> </span></p>
<p>After that, running our Web Application brings the happy picture again:</p>
<p><a href="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/7183.X_0.Success.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/7183.X_5F00_0.Success.png"><img style="max-width: 550px;" border="0" alt="" src="https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/37/92/2011_2D00_12_2D00_08/7183.X_0.Success.png" original-url="http://blogs.msdn.com/cfs-filesystemfile.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-00-37-92-2011_2D00_12_2D00_08/7183.X_5F00_0.Success.png" /></a></p>
<p>What are the drawbacks of this approach? Obviously we lose the benefits of using LocalDB. Installing SQL Server Express may take more time than LocalDB, and there may be some machine cleanup necessary for it to succeed. SQL Server Express Setup can be blocked by problems like corrupt WMI database, polluted registry or components left by SQL Server or Visual Studio CTPs and Betas. And SQL Server Express will continue running in the background even when not needed, as services do.</p>
<h3>Other options</h3>
<p>There are other approaches of using LocalDB under full IIS that are not covered here. We could embrace the Web Application's private LocalDB instance and communicate with it through the Web Application by executing T-SQL scripts from ASP.NET code. We could also use AttachDbFileName option of ADO.NET connection strings and use a database file (.mdf) that would be attached to both our LocalDB during development and Web Application's LocalDB for debugging. I tried both I found them too cumbersome to discuss further.</p>
<h3><a name="TryItNow"></a>Try It Now!</h3>
<p>We are eager to hear your feedback on LocalDB. Please share your thoughts with us. Did any of the approaches presented in this post work for you? Did you figure out a better one? Let us know!</p>
<p>You may also want to see other posts and materials about LocalDB:</p>
<ul>
<li><a href="http://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx">Introducing LocalDB and LocalDB Q&amp;A</a></li>
<li><a href="http://blogs.msdn.com/b/sqlexpress/archive/2011/10/27/net-framework-4-now-supports-localdb.aspx">Upgrading .NET Framework 4 to support LocalDB connections and using SQL Server Management Studio to work with LocalDB</a></li>
<li><a href="http://blogs.msdn.com/b/sqlexpress/archive/2011/11/28/using-localdb-in-visual-studio-2010.aspx">Using LocalDB in Visual Studio 2010</a></li>
<li><a href="http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-1-user-profile.aspx">Using LocalDB in Full IIS, Part 1: User Profile</a></li>
<li><a href="http://blogs.msdn.com/b/sqlexpress/archive/2011/12/09/using-localdb-with-full-iis-part-2-instance-ownership.aspx">Using LocalDB in Full IIS, Part 2: Instance Ownership</a></li>
<li><a href="http://blogs.msdn.com/b/sqlexpress/archive/2011/11/28/simple-installer-for-localdb-has-shipped.aspx">LocalDB RC0 and the New LocalDB Installer</a></li>
<li><a href="http://blogs.msdn.com/b/sqlexpress/archive/2011/10/28/localdb-where-is-my-database.aspx">Where are LocalDB database files located?</a></li>
<li><a href="http://msdn.microsoft.com/en-us/library/hh510202(v=sql.110).aspx">SQL Server 2012 Express LocalDB documentation [preview]</a></li>
</ul>
<p>- Krzysztof Kozielczyk</p>
</p>
<h3>Share Your Feedback</h3>
<p>Please share your feedback with us! Just start a thread on <a href="http://social.msdn.microsoft.com/Forums/sqlexpress/">SQL Express Forum</a>, hit the "Email Author" button on this post, or file a <a href="http://connect.microsoft.com/SQLServer">Connect</a> item!</p>
	</div><!-- .entry-content -->


	<footer class="entry-footer single">
				<hr>
	</footer><!-- .entry-footer -->

</article><!-- #post-## -->

			
		</div><!-- #single-content -->

		
<div id="comments" class="comments-area">
	<div class="comments-title">
		Comments (30)	</div>

	
			<div class="navigation pagination clear-both">
					</div>

		<ol class="comment-list">
					<li class="comment even thread-even depth-1" id="comment-725">
				<div id="div-comment-725" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Josh</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-725">
			March 19, 2012 at 11:14 pm</a>		</div>

		<p>Thank you very much for these posts. This has helped me get my site working.</p>
<p>I am having an issue with the localdb instance not starting automatically.</p>
<p>I have a WCF Data Service connected to a localdb shared instanced. Things all work fine when the localdb instance is running. After some time of inactivity, the localdb instance stops automatically. When the next request comes in through the data service, it does not ever start the localdb instance. </p>
<p>Any help on this would be greatly appreciated. Thanks!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-wardbeattiehotmail-com odd alt thread-odd thread-alt depth-1" id="comment-727">
				<div id="div-comment-727" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Ward+Beattie+%5BMSFT%5D&size=extralarge&version=00000000-0000-0000-0000-000000000000'  class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Ward+Beattie+%5BMSFT%5D' rel='external nofollow' class='url'>Ward Beattie [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-727">
			March 20, 2012 at 10:22 am</a>		</div>

		<p>By default, a LocalDB instance will terminate after 5 minutes with no connections. This can be changed, as follows:</p>
<p>1. Connect to the instance as sysadmin.</p>
<p>2. Run the following batch to show advanced options:</p>
<p> &nbsp; &nbsp;exec sp_configure &#39;show advanced options&#39;,1</p>
<p> &nbsp; &nbsp;reconfigure</p>
<p> &nbsp; &nbsp;exec sp_configure</p>
<p> &nbsp; &nbsp;go</p>
<p>3 Run the following batch to change the timeout to 65535. This value is in seconds, but 65535 is the magic number meaning infinite:</p>
<p> &nbsp; &nbsp;exec sp_configure &#39;user instance timeout&#39;,65535</p>
<p> &nbsp; &nbsp;reconfigure</p>
<p> &nbsp; &nbsp;exec sp_configure &#39;user instance timeout&#39;</p>
<p> &nbsp; &nbsp;go</p>
<p>Once this is done, you will need to shut down the instance using SqlLocalDB.exe, or by connecting and using the T-SQL shutdown command. The instance will also shut down if the user that started it (and owns it) logs off.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-wardbeattiehotmail-com even thread-even depth-1" id="comment-728">
				<div id="div-comment-728" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Ward+Beattie+%5BMSFT%5D&size=extralarge&version=00000000-0000-0000-0000-000000000000'  class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Ward+Beattie+%5BMSFT%5D' rel='external nofollow' class='url'>Ward Beattie [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-728">
			March 20, 2012 at 6:52 pm</a>		</div>

		<p>Correction: in my earlier post, I said that the timeout value was in seconds. It is actually in minutes (for values other than 65535, which still means &quot;infinite&quot;). Sorry for any confusion.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-742">
				<div id="div-comment-742" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Pleasant Holiday</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-742">
			May 1, 2012 at 4:00 pm</a>		</div>

		<p>Hello and thank you for this post!!!</p>
<p>I am trying to use Approach 2 (Use LocalDB Shared Instance) with one twist &#8212; my application running on my local IIS box needs to run under a network domain account. &nbsp;(This duplicates the way our servers are set up, which is done so that various network actions are allowed.)</p>
<p>I finally go this approach to work by realizing that the instance name I need to use is not actually &quot;v11.0&quot;. &nbsp;I am still new to SSDT and LocalDB, and I am not sure why or how my SSDT database project was deployed to a an instanced named (more or less) for my database project. &nbsp;Once I shared that out *and* set that domain account as the server administrator, then I was able to connect.</p>
<p>Your excellent open source tool at codeplex (localdbcompanion) was very interesting to look through, but I am puzzling through how that tool can be used if the instance name is not in fact always &quot;v11.0&quot;. &nbsp;</p>
<p>Any thoughts you have on any of this would be great. </p>
<p>Thanks, and thanks again for this post. &nbsp;I didn&#39;t have a clue how to integrate a database project into my legacy web applications until I finally found this post. &nbsp;Am I correct to wonder if I&#39;d come out farther ahead if I just took the time to convert them from full IIS &quot;web site projects&quot; into web application projects (using the built-in IIS of Visual Studio)?</p>
<p>Pleasant Holiday</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-751">
				<div id="div-comment-751" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Giant Cookie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-751">
			June 1, 2012 at 1:28 am</a>		</div>

		<p>you really think it is a smart idea to do</p>
<p>exec sp_addsrvrolemember N&#39;IIS APPPOOLASP.NET v4.0&#39;, sysadmin </p>
<p>?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-wardbeattiehotmail-com odd alt thread-odd thread-alt depth-1" id="comment-752">
				<div id="div-comment-752" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Ward+Beattie+%5BMSFT%5D&size=extralarge&version=00000000-0000-0000-0000-000000000000'  class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Ward+Beattie+%5BMSFT%5D' rel='external nofollow' class='url'>Ward Beattie [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-752">
			June 1, 2012 at 9:29 am</a>		</div>

		<p>Hi Giant Cookie</p>
<p>If you are referring to the fact that this gives full administrative access to the App Pool identity, then we would agree that this is definitely not the right thing to do in a production environment. However, this post was aimed at the developer who needs to use SQL Server on a development machine with full IIS. Security is a very large subject, and attempting to address it in this context would have made the post much more complex and perhaps less helpful.</p>
<p>Ward.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-dave-sexton even thread-even depth-1" id="comment-789">
				<div id="div-comment-789" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Dave+Sexton&size=extralarge&version=d8800ac2-4f52-4bf0-842a-a04cd43f1a9f'  class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Dave+Sexton' rel='external nofollow' class='url'>Dave Sexton</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-789">
			September 25, 2012 at 6:52 am</a>		</div>

		<p>Thanks for this post, but I&#39;m still getting the same login failure with the first option. &nbsp;I&#39;m logged in as myself to Windows 8. &nbsp;I&#39;ve set my site&#39;s AppPool Identity in IIS to my account. &nbsp;SQL Server Object Explorer in Visual Studio 2012 shows my table in (localdb)v11.0. &nbsp;When I run in debug mode on the VS Dev Server my app connects to the DB successfully and it displays the data. &nbsp;I published the site to my local IIS. &nbsp;I&#39;ve even enabled Windows authentication in web.config and verified that WindowsPrincipal.Current.Identity returns my account name (I printed it to the home page). &nbsp;But I&#39;m getting this exception when running in IIS:</p>
<p>Message: The underlying provider failed on Open.</p>
<p>StackTrace: &nbsp; &nbsp;at System.Data.EntityClient.EntityConnection.OpenStoreConnectionIf</p>
<p>&#8230;</p>
<p>[snip]</p>
<p>&#8230;</p>
<p>InnerException: System.Data.SqlClient.SqlException</p>
<p>Message: Cannot open database &quot;MyDBName&quot; requested by the login. The login failed.</p>
<p>Login failed for user &#39;MyCompMyName&#39;.</p>
<p>Any ideas? &nbsp;Thanks.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-806">
				<div id="div-comment-806" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Gregory</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-806">
			November 18, 2012 at 3:42 pm</a>		</div>

		<p>Do you think it would be possible to create new instance of LocalDB as ApplicationPoolIdentity</p>
<p>or change existing localDB instance owner? I wish to host localDB on my server without</p>
<p>the need to connect to it with visual studio.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-wardbeattiehotmail-com even thread-even depth-1" id="comment-807">
				<div id="div-comment-807" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=Ward+Beattie+%5BMSFT%5D&size=extralarge&version=00000000-0000-0000-0000-000000000000'  class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/Ward+Beattie+%5BMSFT%5D' rel='external nofollow' class='url'>Ward Beattie [MSFT]</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-807">
			November 20, 2012 at 1:24 pm</a>		</div>

		<p>Dave Sexton: could you provide the error.log from usersMyNameappdatalocalmicrosoftmicrosoft sql server local dbinstancesv11.0? If it is easier, you can send email.</p>
<p>Gregory: this can be made to work, however, you cannot use Windows Authentication for your site. You must also ensure (via app pool options) that the user profile for your app pool identity is loaded.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-810">
				<div id="div-comment-810" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Pierre-Henri Barralis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-810">
			December 6, 2012 at 3:13 am</a>		</div>

		<p>Hi, </p>
<p>I am using shared instance (solution 2) localDB, and everything is working except, I can&#39;t start the instance if I&#39;m not logged with the owner of the instance. What is the purpose of sharedInstance if we can&#39;t use it with multiple user account ? Is there a solution to this problem ? </p>
<p>When I start the instance from the owner, then I switch to an other user, it works &nbsp;&#8230;. &nbsp;</p>
<p>Please help me !</p>
<p>Thanks </p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-829">
				<div id="div-comment-829" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Graeme</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-829">
			August 14, 2013 at 7:29 am</a>		</div>

		<p>These are both very good posts. &nbsp;Use of an instance however comes very close to using SQL Express in the first place. &nbsp;One of the more interesting options here would be to attach using the AttachDbFileName= option on the connection string. &nbsp;That way the application can ship with the database.</p>
<p>However When I do this I of course get the error</p>
<p>Login failed for user &#39;IIS APPPOOLsomething&#39; </p>
<p>where &#39;something&#39; is the name of the app pool.</p>
<p>Kind of makes sense as it is the instance that manages login not the database itself but in this case the instance IS running as that app pool identity so how exactly do I tell the database what the permissions are for this identity?</p>
<p>am I being dumb? &nbsp;there are no other posts I can find that cover it. &nbsp;</p>
<p>Even if I run the SP to add the sysadmin role per the post I still fail the login. &nbsp;I am sure the role exists if I was actually able to authenticate.</p>
<p>Confused but hopeful:</p>
<p>Graeme</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-837">
				<div id="div-comment-837" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/5f0e26ef7c26e901d606193a57c52828?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/5f0e26ef7c26e901d606193a57c52828?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">phil_steel@hotmail.com</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-837">
			October 15, 2013 at 1:48 pm</a>		</div>

		<p>Great post. </p>
<p>Was having this issue with a web api application and saved me a lot of head-scratching.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-838">
				<div id="div-comment-838" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">MCKLMT</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-838">
			October 17, 2013 at 12:20 am</a>		</div>

		<p>After launched the command to share the instance, you should stop and start the main instance that the modifications be saved and the shared instance be accessible.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-847">
				<div id="div-comment-847" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Phil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-847">
			November 4, 2013 at 4:39 pm</a>		</div>

		<p>I thought using localDB was supposed to be easy! &nbsp;I tried everything I could find. &nbsp;Never got past the first part. &nbsp;Very discouraging working hard to create an app, thinking you&#39;re home free, try to run it from IIS and SPLAT!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-855">
				<div id="div-comment-855" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">AA</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-855">
			December 7, 2013 at 7:21 pm</a>		</div>

		<p>Thank you! &nbsp;You helped me solve my issue with LocalDB! &nbsp;My local site is now working! &nbsp;The only reason I installed IIS today was because I needed to have my site go SSL and I main way online I read to do this is with IIS. &nbsp;But I couldn&#39;t get my application to work, I almost had given up hope when I ran across both your articles. ..</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-882">
				<div id="div-comment-882" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Halabi</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-882">
			May 26, 2014 at 1:56 pm</a>		</div>

		<p>In approach 2, the user must restart the instance to get the shared instance working, you can restart by &quot;sqllocaldb stop instance&quot; then &quot;sqllocaldb start instance&quot;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-883">
				<div id="div-comment-883" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Novaterata</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-883">
			May 29, 2014 at 6:27 am</a>		</div>

		<p>I have a Topshelf service that accesses a named localdb instance and an MVC web service that accesses the same named instance. Both process and AppPool run as the same user and load user profile and all that is already set. Everything works when the product is installed and both of these are running as LocalSystem by default, but as long as the users are the same, this works. This setup also works when debugging using IIS Express; however, when I switch to Full IIS while debugging (using the same user on the AppPool of course) I get the usual Error 50s one would expect if the AppPool was running as a different user or a user without permissions. I&#39;m really scratching my head on this one. This even occurs when the processor is not running and I&#39;m only debugging the MVC project, and also occurs using v11.0 with no other instances running. So the problem seems to be I can&#39;t connect to LocalDB why debugging Full IIS.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-884">
				<div id="div-comment-884" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Novaterata</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-884">
			June 3, 2014 at 6:21 am</a>		</div>

		<p>Turns out the culprit was Windows 7 SP1 setProfileEnvironment=&quot;true&quot; not being set by the command line tool. Editing the applicationHost(s?).config file was not enough in this case, presumabely because the location had changed, I don&#39;t know. Running as LocalSystem does not require this flag apparently, and we normally test on 2k8r2.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-897">
				<div id="div-comment-897" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Mark </cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-897">
			July 27, 2014 at 4:36 pm</a>		</div>

		<p>On my Windows 7 x64 the relevent domainaccount is [IIS APPPOOLDefaultAppPool], not [IIS APPPOOLASP.NET v4.0] &nbsp;</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-900">
				<div id="div-comment-900" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Robert</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-900">
			August 1, 2014 at 6:51 am</a>		</div>

		<p>Hello, i&#39;ve changed the app. pool user with the administrator user but still get the same error ! why?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-902">
				<div id="div-comment-902" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Anuj Jain</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-902">
			August 6, 2014 at 11:57 pm</a>		</div>

		<p>It worked&#8230;thanks for your solution!!</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-917">
				<div id="div-comment-917" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Ananth Kumbla</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-917">
			December 26, 2014 at 3:18 am</a>		</div>

		<p> Hey I am using Approach 2 </p>
<p>I get the following error</p>
<p>Cannot attach the file &#39;C:inetpubwwwrootMvcApplication26App_Dataaspnet-MvcApplication26-20141226150050.mdf&#39; as database &#39;aspnet-MvcApplication26-20141226150050&#39;.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1192">
				<div id="div-comment-1192" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">GrazyGee</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-1192">
			April 16, 2015 at 11:38 pm</a>		</div>

		<p>Awesome article. A few years on and still helping people. </p>
<p>Thanks</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-anthonygrace odd alt thread-odd thread-alt depth-1" id="comment-1182">
				<div id="div-comment-1182" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://i1.social.s-msft.com/profile/u/avatar.jpg?displayname=IrishChieftain10&size=extralarge&version=00000000-0000-0000-0000-000000000000'  class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn"><a href='https://social.msdn.microsoft.com/profile/IrishChieftain10' rel='external nofollow' class='url'>IrishChieftain10</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-1182">
			August 6, 2015 at 7:16 am</a>		</div>

		<p>I&#39;m using approach #2.</p>
<p>When I try to create the login as follows:</p>
<p>create login [IIS APPPOOLDTC v4.0] from windows;</p>
<p>exec sp_addsrvrolemember N&#39;IIS APPPOOLDTC v4.0&#39;, sysadmin</p>
<p>I get the following errors:</p>
<p>Msg 15401, Level 16, State 1, Line 1</p>
<p>Windows NT user or group &#39;IIS APPPOOLDTC v4.0&#39; not found. Check the name again.</p>
<p>Msg 15007, Level 16, State 1, Procedure sp_addsrvrolemember, Line 33</p>
<p>&#39;IIS APPPOOLDTC v4.0&#39; is not a valid login or you do not have permission.</p>
<p>Can anyone help?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1152">
				<div id="div-comment-1152" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">NotMoreChanges</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-1152">
			September 2, 2015 at 5:55 am</a>		</div>

		<p>I agree with GrazyGee. Great article. I&#39;m not sure people who have been helped by this article can truly convey the appreciation they feel for the help you have offered.</p>
<p>It&#39;s a shame that one or two (ok, we all know it&#39;s one) of the comments seem more about seeming clever than offering constructive help.</p>
<p>Thanks a lot</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1142">
				<div id="div-comment-1142" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Muni</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-1142">
			September 3, 2015 at 5:21 am</a>		</div>

		<p>Hello,</p>
<p> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Don&#39;t get me wrong can any body please tell is local server database can access out of server?</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1132">
				<div id="div-comment-1132" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Tom Wesson</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-1132">
			September 10, 2015 at 6:47 am</a>		</div>

		<p>Thank you for this very much needed article. &nbsp;One thing I like about open source is that complexity is not introduced for the sake of licensing. &nbsp;You have helped shine a light on how to manage that complexity for those of us that must deal with SQL Server&#39;s various incarnations. &nbsp;This obviously helps us spend more time on what we&#39;re actually good at, and less time on things we rarely have to deal with. &nbsp;Thank you again.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1112">
				<div id="div-comment-1112" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">John</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-1112">
			September 11, 2015 at 9:36 am</a>		</div>

		<p>What a great post and big help. I appreciated it</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1092">
				<div id="div-comment-1092" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Cerbundo</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-1092">
			September 30, 2015 at 1:53 pm</a>		</div>

		<p>Thank you for this post. It was very helpful for me.</p>

		
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1082">
				<div id="div-comment-1082" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=56&#038;d=mm&#038;r=g' srcset='https://secure.gravatar.com/avatar/3651e719491c63d4424134d66fe53db9?s=112&#038;d=mm&#038;r=g 2x' class='avatar avatar-56 photo' height='56' width='56' />			<cite class="fn">Andrew</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/#comment-1082">
			October 23, 2015 at 9:38 am</a>		</div>

		<p>&quot;My hope is to hear from you about the one that worked best for you!&quot;&#8230;</p>
<p>The first option works just fine! &nbsp;Thank you so much.</p>
<p>Security is not an issue for me. &nbsp;This is just my own dev environment.</p>
<p>Tiny tip for others. &nbsp;When you specify your custom credentials you need domainusername setting up for the default pool. &nbsp;Might be obvious for others?</p>

		
				</div>
		</li><!-- #comment-## -->
		</ol><!-- .comment-list -->

		<div class="navigation pagination">
					</div>

	
			<p class="no-comments">Comments are closed.</p>
	
</div><!-- .comments-area -->
	</div><!-- #primary -->
	<a class="screen-reader-shortcut" href="#primary" tabindex="1">Skip to main content</a>

<div id="secondary" class="sidebar col-sm-3">
	<div id="sidebar-widget-area" class="sidebar-widget-area" role="complementary">
		<aside id="sfmsb_settings-3" class="widget sfmsb_widget"><div class="sfmsb-follow-social-buttons sfmsb-under sfmsb-circle 40 sfmsb-horizontal"><h2 class="widget-title">Follow Us</h2><a title="RSS Feed" aria-label="RSS Feed" target="_blank" href="https://blogs.msdn.microsoft.com/sqlexpress/feed/"><span class="sfmsb-icon-feed sfmsb-circle" style="color:#ffa500;font-size:40px;" data-color="#ffa500"></span></a><div class="sfmsb-clearfix"></div></div></aside><aside id="tag_cloud-3" class="widget widget_tag_cloud"><h2 class="widget-title">Popular Tags</h2><div class="tagcloud"><a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/product-info/" class="tag-cloud-link tag-link-3 tag-link-position-1" style="font-size: 14px;">Product Info</a>
<a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/headlines/" class="tag-cloud-link tag-link-8 tag-link-position-2" style="font-size: 14px;">Headlines</a>
<a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/faq/" class="tag-cloud-link tag-link-4 tag-link-position-3" style="font-size: 14px;">FAQ</a>
<a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/general/" class="tag-cloud-link tag-link-2 tag-link-position-4" style="font-size: 14px;">General</a>
<a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/archive/" class="tag-cloud-link tag-link-5 tag-link-position-5" style="font-size: 14px;">Archive</a>
<a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/samples/" class="tag-cloud-link tag-link-6 tag-link-position-6" style="font-size: 14px;">Samples</a>
<a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/futures/" class="tag-cloud-link tag-link-7 tag-link-position-7" style="font-size: 14px;">Futures</a>
<a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/pages/" class="tag-cloud-link tag-link-9 tag-link-position-8" style="font-size: 14px;">Pages</a>
<a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/installation/" class="tag-cloud-link tag-link-10 tag-link-position-9" style="font-size: 14px;">Installation</a>
<a href="https://blogs.msdn.microsoft.com/sqlexpress/tag/localdb/" class="tag-cloud-link tag-link-11 tag-link-position-10" style="font-size: 14px;">localdb</a></div>
</aside><aside id="msdn-archive-widget-3" class="widget msdn-archive-widget"><h2 class="widget-title">Archives</h2>	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2012/03/'>March 2012</a>&nbsp;(1)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2011/12/'>December 2011</a>&nbsp;(2)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2011/11/'>November 2011</a>&nbsp;(2)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2011/10/'>October 2011</a>&nbsp;(2)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2011/07/'>July 2011</a>&nbsp;(1)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2011/03/'>March 2011</a>&nbsp;(1)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2010/04/'>April 2010</a>&nbsp;(2)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2010/02/'>February 2010</a>&nbsp;(2)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2009/12/'>December 2009</a>&nbsp;(1)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2009/11/'>November 2009</a>&nbsp;(1)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2009/09/'>September 2009</a>&nbsp;(3)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2012/'>All of 2012</a>&nbsp;(1)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2011/'>All of 2011</a>&nbsp;(8)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2010/'>All of 2010</a>&nbsp;(4)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2009/'>All of 2009</a>&nbsp;(18)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2008/'>All of 2008</a>&nbsp;(15)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2007/'>All of 2007</a>&nbsp;(10)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2006/'>All of 2006</a>&nbsp;(38)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2005/'>All of 2005</a>&nbsp;(10)</li>
	<li><a href='https://blogs.msdn.microsoft.com/sqlexpress/2004/'>All of 2004</a>&nbsp;(22)</li>
</aside>	</div>
</div><!-- #secondary -->
</div><!-- .site-content -->

<footer id="site-footer" class="site-footer row" role="contentinfo">
	<div id="site-info" class="site-info">
		<div id="footer-text" class="col-sm-4 col-sm-offset-6">
			<span>
				<a href="https://privacy.microsoft.com" data-mscc-ic="false">Privacy</a>
			</span>
			<span>
				<a href="https://msdn.microsoft.com/cc300389" data-mscc-ic="false">Terms of Use</a>
			</span>
			<span>
				<a href="https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/EN-US.aspx" data-mscc-ic="false">Trademarks</a>
			</span>
		</div>
		<div id="footer-far" class="col-sm-2">
			<div id="footer-microsoft-logo">
				<a href="https://www.microsoft.com" aria-label="Microsoft Logo">
					<svg id="footer-microsoft-logo-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 347 70.5" enable-background="new 0 0 347 70.5"><g fill="#fff"><path d="M39.5 44.6l-2.8 7.9h-.2c-.5-1.8-1.3-4.5-2.7-7.8l-15-37.7h-14.7v60h9.7v-37c0-2.3 0-5-.1-8.2-.1-1.6-.2-2.9-.3-3.8h.2c.5 2.3 1 4 1.4 5.1l18 43.8h6.8l17.9-44.2c.4-1 .8-3 1.2-4.7h.2c-.2 4.4-.4 8.4-.5 10.8v38.1h10.4v-60h-14.1l-15.4 37.7zM78.8 23.9h10.1v43h-10.1zM83.9 5.7c-1.7 0-3.1.6-4.3 1.7-1.2 1.1-1.8 2.5-1.8 4.2 0 1.6.6 3 1.8 4.1 1.2 1.1 2.6 1.6 4.3 1.6 1.7 0 3.2-.6 4.3-1.6 1.2-1.1 1.8-2.5 1.8-4.1 0-1.6-.6-3-1.8-4.2-1-1.2-2.5-1.7-4.3-1.7M124.7 23.5c-1.9-.4-3.8-.6-5.7-.6-4.6 0-8.8 1-12.3 3s-6.3 4.8-8.1 8.3c-1.9 3.6-2.8 7.7-2.8 12.4 0 4.1.9 7.8 2.7 11.1 1.8 3.3 4.3 5.9 7.6 7.7 3.2 1.8 6.9 2.7 11.1 2.7 4.8 0 8.9-1 12.2-2.9l.1-.1v-9.3l-.4.3c-1.5 1.1-3.2 2-4.9 2.6-1.8.6-3.4.9-4.8.9-4 0-7.2-1.2-9.5-3.7s-3.5-5.9-3.5-10.2c0-4.4 1.2-7.9 3.6-10.5 2.4-2.6 5.6-3.9 9.5-3.9 3.3 0 6.6 1.1 9.6 3.3l.4.3v-9.8l-.1-.1c-1.2-.6-2.8-1.1-4.7-1.5M158 23.2c-2.5 0-4.8.8-6.8 2.4-1.7 1.4-2.9 3.4-3.9 5.8h-.1v-7.4h-10.1v43h10.1v-22c0-3.7.8-6.8 2.5-9.1s3.9-3.5 6.5-3.5c.9 0 1.9.2 3 .4 1.1.3 1.9.6 2.4 1l.4.3v-10.2l-.2-.1c-.8-.4-2.1-.6-3.8-.6M185.5 22.9c-7.1 0-12.7 2.1-16.7 6.2s-6 9.8-6 16.9c0 6.7 2 12.1 5.9 16.1 3.9 3.9 9.2 5.9 15.8 5.9 6.9 0 12.4-2.1 16.4-6.3 4-4.2 6-9.8 6-16.7 0-6.8-1.9-12.3-5.7-16.2-3.7-3.9-9-5.9-15.7-5.9m8 33.1c-1.9 2.4-4.8 3.6-8.5 3.6s-6.6-1.2-8.7-3.7c-2.1-2.4-3.1-5.9-3.1-10.3 0-4.6 1.1-8.1 3.1-10.6 2.1-2.5 5-3.7 8.6-3.7 3.6 0 6.4 1.2 8.4 3.6 2 2.4 3.1 5.9 3.1 10.5s-1 8.2-2.9 10.6M229.3 41.7c-3.2-1.3-5.2-2.3-6.1-3.2-.8-.8-1.2-1.9-1.2-3.3 0-1.2.5-2.3 1.6-3.1 1.1-.8 2.5-1.2 4.4-1.2 1.7 0 3.5.3 5.2.8 1.7.5 3.3 1.2 4.5 2.1l.4.3v-9.4l-.2-.1c-1.2-.5-2.7-.9-4.6-1.3-1.9-.3-3.6-.5-5-.5-4.8 0-8.8 1.2-11.9 3.7-3.1 2.4-4.6 5.7-4.6 9.5 0 2 .3 3.8 1 5.3s1.7 2.9 3.1 4c1.4 1.1 3.4 2.3 6.2 3.5 2.3 1 4.1 1.8 5.2 2.4 1.1.6 1.8 1.3 2.3 1.9.4.6.6 1.4.6 2.4 0 2.9-2.2 4.3-6.6 4.3-1.7 0-3.5-.3-5.6-1-2.1-.7-4-1.7-5.7-2.9l-.4-.3v9.9l.2.1c1.5.7 3.3 1.2 5.4 1.7 2.2.4 4.1.7 5.8.7 5.2 0 9.5-1.2 12.5-3.7 3.1-2.5 4.7-5.7 4.7-9.8 0-2.9-.8-5.4-2.5-7.4-1.8-2-4.7-3.8-8.7-5.4M267.6 22.9c-7.1 0-12.7 2.1-16.7 6.2s-6 9.8-6 16.9c0 6.7 2 12.1 5.9 16.1 3.9 3.9 9.2 5.9 15.8 5.9 6.9 0 12.4-2.1 16.4-6.3 4-4.2 6-9.8 6-16.7 0-6.8-1.9-12.3-5.7-16.2-3.8-3.9-9.1-5.9-15.7-5.9m8 33.1c-1.9 2.4-4.8 3.6-8.5 3.6s-6.6-1.2-8.7-3.7c-2.1-2.4-3.1-5.9-3.1-10.3 0-4.6 1.1-8.1 3.1-10.6 2.1-2.5 5-3.7 8.6-3.7 3.5 0 6.4 1.2 8.4 3.6 2 2.4 3.1 5.9 3.1 10.5s-1 8.2-2.9 10.6"/><path d="M342.9 32.2v-8.2h-10.2v-12.9l-.3.1-9.6 2.9-.2.1v9.7h-15.2v-5.4c0-2.5.6-4.4 1.7-5.7 1.1-1.3 2.7-1.9 4.7-1.9 1.4 0 2.9.3 4.5 1l.4.2v-8.7l-.2-.1c-1.4-.5-3.3-.8-5.7-.8-3 0-5.7.7-8.1 1.9-2.4 1.3-4.2 3.1-5.5 5.5-1.3 2.3-2 5-2 8v6h-7.2v8.2h7.1v34.8h10.2v-34.7h15.2v22.1c0 9.1 4.3 13.7 12.8 13.7 1.4 0 2.9-.2 4.3-.5 1.5-.3 2.6-.7 3.2-1l.1-.1v-8.3l-.4.3c-.6.4-1.2.7-2.1.9-.8.2-1.5.3-2 .3-2 0-3.4-.5-4.4-1.6-.9-1.1-1.4-2.9-1.4-5.5v-20.3h10.3z"/></g></svg>
				</a>
			</div>
			<div id="copyright">
				© 2019 Microsoft
			</div>
		</div>
	</div><!-- .site-info -->
</footer><!-- .site-footer -->

</div><!-- .site -->

	<script type="text/javascript">
	jQuery(document).ready(function($){
		$login_link = $( 'a[href*="wp-login.php?"]' );
				$login_link.on( 'click', function( evt ) {
			// evt.preventDefault();
						// console.log( 'cookie-set', '/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/' );
			$.cookie( 'aadsso-redirect', '/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/', { expires: 1, path: '/' });
		});
	});
	</script>
		<script>
		jQuery(window).load(function () {
			// Fix Bug #644092:MAS36: Page number
			jQuery('div.nav-links>a.page-numbers').each(function(){
				jQuery(this).attr('aria-label', 'Page ' + jQuery(this).html());
			});

			// Fix Bug #633981:MAS20B:  Talkback: Talkback announces link for Number of Comments as 'Number link'
			jQuery('span.comments-link>a').each(function () {
				var num = parseInt(jQuery(this).html());
				if (isNaN(num)) {
					return false;
				}
				var content = num + (num === 1 ? ' comment' : ' comments');
				jQuery(this).attr({
					'aria-label': content,
					'title': content
				});
			});


			jQuery('#search-option>div').each(function () {
				jQuery(this).attr('aria-label',jQuery('span.search-text',this).html());
			});

			// Fix Bug #671896:MAS40B :Inspect: Header: "Name" property is not descriptive for  "Microsoft | TechNet" link (logo).
			var currentHost = location.hostname;
			if (currentHost.indexOf('msdn') !== -1) {
				jQuery('#home-link').attr('aria-label','Microsoft Developer');
			} else if (currentHost.indexOf('technet') !== -1) {
				jQuery('#home-link').attr('aria-label','Microsoft Technet');
			}

			// Detect High Contrast Mode in non IE/Edge Browsers
			jQuery('html').css('background-image', 'url("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==")');
			if (jQuery('html').css('background-image') === 'none') {
				jQuery('html').attr('data-high-contrast', 'true');
			}

			// Fix Bug #670327:MAS40B: Inspect: Header: "Localized control type" property is incorrect for the header elements.
			// Fix Bug #683788:MAS40B: TalkBack: Header: For menu items in technet link menu bar, expand/collapse pattern available, is not announced by TalkBack 
			jQuery('#site-navigation>div>ul>li>a').attr('role', 'button').attr('aria-expanded', 'false').click(function () {
				if (jQuery(this).attr('aria-expanded') === 'true') {
					jQuery(this).attr('aria-expanded', 'false');
				} else {
					jQuery(this).attr('aria-expanded', 'true');
				}
			});

		});
	</script>
		<!--ADD WEDCS SCRIPT-->
	<div id="_WEDCSInsertedData" style="display: none;"></div>
	<script type="text/javascript">
		jQuery( window ).load(
			function() {
				window.varSegmentation = 0;
				window.varClickTracking = 1;
				window.varCustomerTracking = 1;
				window.varAutoFirePV = 1;
				window.Route = ""; // was 23470 in the windows theme framework
				window.Ctrl = "";

								var blogPost = {};

								blogPost.permalink = 'https://blogs.msdn.microsoft.com/sqlexpress/2011/12/08/using-localdb-with-full-iis-part-2-instance-ownership/';
				blogPost.title = 'Using LocalDB with Full IIS, Part 2: Instance Ownership';
				blogPost.author = 'sqlexpress';
				blogPost.post_date = '2011-12-08 23:17:00';
				blogPost.category = 'Uncategorized';
				blogPost.tag = '';
				blogPost.comment_number = '30';
								window.blogPost = blogPost;

                var wedcs_script = document.createElement('script');
                wedcs_script.type = 'text/javascript';
                wedcs_script.async = true;
                wedcs_script.src = 'https://blogs.msdn.microsoft.com/sqlexpress/wp-content/mu-plugins/wedcs-script/ms2_blogs.js';
                if (typeof mscc === 'undefined' || (!mscc || mscc.hasConsent())) {
                    document.getElementsByTagName('body')[0].appendChild(wedcs_script);
                }

				var script_jsll = document.createElement("script");
				script_jsll.type = "text/javascript";
				script_jsll.src = "//az725175.vo.msecnd.net/scripts/jsll-4.2.1.js";
				script_jsll.onload = function () {
					var domainAppIdDic = {
						"blogs.msdn.microsoft.com": "blogsmsdn",
						"blogs.technet.microsoft.com": "blogstechnet"
					};
					var domain = document.domain;
					var appId = "blogsmsdn";
					if (domainAppIdDic[domain]) {
						appId = domainAppIdDic[domain];
					}
					var config = {
						coreData: {
							appId: appId
						}
					};
					awa.init(config);
				};
				if (document.getElementsByTagName("head") && document.getElementsByTagName("head").length > 0) {
					document.getElementsByTagName("head")[0].appendChild(script_jsll);
				}
			});
	</script>
	<!--
	<script src="//c.microsoft.com/ms.js" type="text/javascript"></script>
	<noscript><img alt="" width="1" height="1" src="http://c.microsoft.com/trans_pixel.aspx"/></noscript>
	-->
		<script type="text/javascript">
			jQuery( window ).load(
				function () {
					var stylesheet = document.createElement('link');
					stylesheet.href = 'https://blogs.msdn.microsoft.com/sqlexpress/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/css/style.css?ver=3.3.3';
					stylesheet.rel = 'stylesheet';
					stylesheet.type = 'text/css';
					document.getElementsByTagName('head')[0].appendChild(stylesheet);
				});
		</script>
				<script type="text/javascript">
			jQuery( window ).load(
				function () {
					var stylesheet = document.createElement('link');
					stylesheet.href = 'https://blogs.msdn.microsoft.com/sqlexpress/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/css/icons.css?ver=3.3.3';
					stylesheet.rel = 'stylesheet';
					stylesheet.type = 'text/css';
					document.getElementsByTagName('head')[0].appendChild(stylesheet);
				});
		</script>
				<script type="text/javascript">
			jQuery( window ).load(
				function () {
					var script = document.createElement('script');
					script.src = 'https://blogs.msdn.microsoft.com/sqlexpress/wp-content/plugins/simple-follow-me-social-buttons-widget/assets/js/front-widget.js?ver=3.3.3';
					script.type = 'text/javascript';
					script.async = true;
					document.getElementsByTagName('body')[0].appendChild(script);
				});
		</script>
		
		<span id='page-view-tracking-info' blog-id='43' post-id='150'></span>
		<script type="text/javascript">
			// Check for compatibility before IE8
			if (!Date.now) {
 				 Date.now = function() { return new Date().getTime(); };
			}
			jQuery( window ).load( function() {
				jQuery.ajax({
					url: 'https://blogs.msdn.microsoft.com/sqlexpress/wp-admin/admin-ajax.php',
					type: 'get',
					data: {
						action: 'track_page_view',
						track_page_view_post_id: jQuery('#page-view-tracking-info').attr('post-id'),
						track_page_view_blog_id: jQuery('#page-view-tracking-info').attr('blog-id'),
						track_page_view_post_url: window.location.href.split('?')[0],
						timestamp: Date.now()
						}
				});
			});
		</script>
<script>
dataLayer = [[]];
</script>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PLR87W" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>jQuery(window).load(function(){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PLR87W')});
</script>
<!-- End Google Tag Manager -->
	<script type="text/javascript">
		jQuery( window ).load(
			function(i) {
				var n = window,
					t = document,
					e = n.console,
					f, u, r, o;
				typeof e == "undefined" && (f = function() {}, e = {
					log: f,
					warn: f,
					assert: f,
					clear: f,
					dir: f,
					error: f,
					info: f,
					profile: f,
					profileEnd: f
				}), u = {
					appendToHead: function(n) {
						if (t.getElementsByTagName("head").length > 0) t.getElementsByTagName("head")[0].appendChild(n);
						else throw "bootstrapper: no head element found.";
					},
					appendToBody: function(n) {
						if (t.getElementsByTagName("body").length > 0) t.getElementsByTagName("body")[0].appendChild(n);
						else throw "bootstrapper: no body element found.";
					},
					addStyleElement: function(n) {
						var i = t.createElement("link");
						i.setAttribute("href", n), i.setAttribute("rel", "stylesheet"), i.setAttribute("type", "text/css"), u.appendToHead(i)
					},
					loadFiles: function(n, t) {
						if (t !== i && u.recursiveScriptLoad(0, t), n !== i)
							for (var r = 0, r = 0; r < n.length; r++) u.addStyleElement(n[r])
					},
					recursiveScriptLoad: function(n, t) {
						t[n] && u.addScriptElement(t[n], function() {
							u.recursiveScriptLoad(n + 1, t)
						})
					},
					isCompatible: function(n, t) {
						var r, u, i;
						return (r = n.split("."), u = t.split("."), i = function(n) {
							return isNaN(n) ? 0 : n
						}, i(r[0]) > i(u[0]) || i(r[0]) === i(u[0]) && i(r[1]) > i(u[1]) || i(r[0]) === i(u[0]) && i(r[1]) === i(u[1]) && i(r[2]) >= i(u[2])) ? !0 : !1
					},
					addScriptElement: function(i, r) {
						var f, e;
						f = t.createElement("script"), f.setAttribute("type", "text/javascript"), f.async = true, f.setAttribute("src", i), f.attachEvent ? (e = function() {
							setTimeout(function() {
								typeof n.jQuery != "undefined" && r ? r() : e()
							}, 10)
						}, e()) : f.onload = r, u.appendToBody(f)
					},
					load: function(n, t) {
						setTimeout(function() {
							if (typeof n == "undefined") try {
								u.addScriptElement(t.defaultPath, function() {
									u.loadFiles(t.cssFiles, t.jsFiles)
								});
								return
							} catch (i) {
								e.warn("bootstrapper: failed to load default jQuery")
							} else if (!u.isCompatible(n.fn.jquery, t.minimumVersion)) {
								e.warn("bootstrapper: jQuery version is too old to load UserCard. Use v1.4.2 or later.");
								return
							}
							u.loadFiles(t.cssFiles, t.jsFiles)
						}, 0)
					}
				}, r = {
					host: n.location.host,
					search: "",
					protocol: "https"
				}, r.host = "widgets.services.microsoft.com", r.search = "?brand=msdn&lang=en&ver=4.9.0.0", r.protocol = "https:", o = {
					minimumVersion: "1.1.2",
					defaultPath: "https://code.jquery.com/jquery-1.4.2.min.js",
					cssFiles: [r.protocol + "//" + r.host + "/v1/UnifiedBaseballCard.css" + r.search, r.protocol + "//" + r.host + "/v1/usercard.css" + r.search],
					jsFiles: ["https://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js", r.protocol + "//" + r.host + "/v1/jquery.timeago.js" + r.search, r.protocol + "//" + r.host + "/v1/jquery.textfill.js" + r.search, r.protocol + "//" + r.host + "/v1/widgets.js" + r.search]
				}, typeof n.jQuery == "undefined" ? u.load(i, o) : u.load(n.jQuery, o)
			}
		);
	</script>
<link rel='stylesheet' id='eucookielaw-css-css'  href='https://c.s-microsoft.com/mscc/statics/mscc-0.4.1.min.css?ver=4.9.10' type='text/css' media='all' />
<script type='text/javascript'>
/* <![CDATA[ */
var wpAjax = {"noPerm":"Sorry, you are not allowed to do that.","broken":"Something went wrong."};
/* ]]> */
</script>
<script type='text/javascript' src='https://blogs.msdn.microsoft.com/sqlexpress/wp-includes/js/wp-ajax-response.min.js?ver=4.9.10'></script>
<script type='text/javascript' src='https://blogs.msdn.microsoft.com/sqlexpress/wp-content/plugins/msdn-delete-comment/msdn-delete-comment-script.js?ver=20180311'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var wds_ratings_config = {"ajaxurl":"https:\/\/blogs.msdn.microsoft.com\/sqlexpress\/wp-admin\/admin-ajax.php","user_id":"0","nonce":"8cb3abe667","debug":"","no_auth_alert":"You must be logged in to rate this article.","repeatedly_vote_alert":"You can not vote repeatedly in a short time","allow_anonymous_rating":"","blog_id":"43","rating_limit_login_user":"1","rating_limit_anonymous":"1","hide_rating_post_ids":""};
var wds_ratings_config = {"ajaxurl":"https:\/\/blogs.msdn.microsoft.com\/sqlexpress\/wp-admin\/admin-ajax.php","user_id":"0","nonce":"8cb3abe667","debug":"","no_auth_alert":"You must be logged in to rate this article.","repeatedly_vote_alert":"You can not vote repeatedly in a short time","allow_anonymous_rating":"","blog_id":"43","rating_limit_login_user":"1","rating_limit_anonymous":"1","hide_rating_post_ids":""};
/* ]]> */
</script>
<script type='text/javascript' src='https://blogs.msdn.microsoft.com/sqlexpress/wp-content/plugins/wds-ratings/wds-ratings.js?ver=20161014'></script>
<script type='text/javascript' src='https://blogs.msdn.microsoft.com/sqlexpress/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='https://blogs.msdn.microsoft.com/sqlexpress/wp-content/themes/microsoft/js/theme-merged.js?ver=02092017'></script>
<script type='text/javascript' src='https://blogs.msdn.microsoft.com/sqlexpress/wp-includes/js/wp-embed.min.js?ver=4.9.10'></script>
<script type='text/javascript' src='https://c.s-microsoft.com/mscc/statics/mscc-0.4.1.min.js?ver=4.9.10'></script>
<script type='text/javascript' src='https://blogs.msdn.microsoft.com/sqlexpress/wp-content/plugins/eu-cookie-law/eucookielaw-searchbox-script.js?ver=4.9.10'></script>
<script type='text/javascript' src='https://blogs.msdn.microsoft.com/sqlexpress/wp-content/themes/microsoft/js/vendor/jquery.cookie.js?ver=11092015'></script>

</body>
</html>
